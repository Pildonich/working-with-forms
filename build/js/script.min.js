"use strict";!function(){function n(){document.querySelector(".animation").classList.toggle("animation--show")}window.animationLoader={start:function(){n();for(var e=0;e<window.storage.data.length;e++)window.storage.data[e].disabled=!0},end:function(){n();for(var e=0;e<window.storage.data.length;e++)window.storage.data[e].disabled=!1}}}(),function(){var e=document.querySelector(".submit");e&&e.addEventListener("click",function(){window.validation.hideError(),window.animationLoader.start(),new Promise(function(e,n){setTimeout(function(){window.validation.check(),document.querySelector(".error")?n("Заполните все поля правильно!"):e(),window.animationLoader.end()},2e3)}).then(window.service.openWindow).catch(window.service.popUpToggle)})}(),function(){function n(){o.classList.toggle("pop-up--show")}var e=document.querySelector(".pop-up__wrapper"),o=document.querySelector(".pop-up"),t=document.querySelector(".close"),r=document.querySelector(".close-window");e&&e.addEventListener("click",function(){n()}),t&&t.addEventListener("click",n),r&&r.addEventListener("click",function(){window.close()}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),o.classList.contains("pop-up--show")&&n())}),window.service={openWindow:function(){window.open("thank-you.html")},popUpToggle:n}}(),function(){function r(e){localStorage.setItem("form",JSON.stringify(e))}function n(e){var n=e.target,o=n.name,t=n.value;a[o]=t,r(a)}var a=localStorage.getItem("form"),e=document.querySelectorAll("[name]");a?a=JSON.parse(a):r(a={}),Array.prototype.forEach.call(e,function(e){a[e.name]===e.value?e.checked=!0:"name"===e.name?e.value=a.name||"":"surname"===e.name?e.value=a.surname||"":"favorite-music"===e.name&&(e.value=a["favorite-music"]),e.addEventListener("change",n)}),window.storage={data:e}}(),function(){function r(e){var n=document.createElement("div");return n.className="error",n.style.color="red",n.innerHTML=e,n}function a(e,n){var o=document.querySelector(n);o.parentElement.insertBefore(e,o)}function t(e,n,o){var t=document.querySelector(e).value;/^[а-яА-ЯёЁ]{2,}$/.test(t)||a(r(o),n)}function i(e,n,o){var t=document.getElementsByName(e);Array.prototype.filter.call(t,function(e){return e.checked}).length||a(r(o),n)}window.validation={check:function(){var e,n,o;t(".name",".wrapper-name","Имя должно состоять только из русских букв и иметь длинну более 2х символов"),t(".surname",".wrapper-surname","Фамилия должна состоять только из русских букв и иметь длинну более 2х символов"),i("favorite-number",".wrapper-favorite-number","Выбирите любимую цифру"),i("favorite-color",".wrapper-favorite-color","Выбирите любимый цвет"),e=".favorite-music",n=".wrapper-favorite-music",o="Выбирите любимого музыкального исполнителя",document.querySelector(e).value||a(r(o),n)},hideError:function(){for(var e=document.querySelectorAll(".error"),n=0;n<e.length;n++)e[n].remove()}}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbkxvYWRlci5qcyIsImZvcm0uanMiLCJzZXJ2aWNlLmpzIiwic3RvcmFnZS5qcyIsInZhbGlkYXRpb24uanMiXSwibmFtZXMiOlsiYW5pbWF0aW9uVG9nZ2xlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwid2luZG93IiwiYW5pbWF0aW9uTG9hZGVyIiwic3RhcnQiLCJpIiwic3RvcmFnZSIsImRhdGEiLCJsZW5ndGgiLCJkaXNhYmxlZCIsImVuZCIsInN1Ym1pdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ2YWxpZGF0aW9uIiwiaGlkZUVycm9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzZXRUaW1lb3V0IiwiY2hlY2siLCJ0aGVuIiwic2VydmljZSIsIm9wZW5XaW5kb3ciLCJjYXRjaCIsInBvcFVwVG9nZ2xlIiwicG9wVXAiLCJwb3BVcFdyYXBwZXIiLCJjbG9zZSIsImNsb3NlV2luZG93QnRuIiwiZXZ0Iiwia2V5Q29kZSIsInByZXZlbnREZWZhdWx0IiwiY29udGFpbnMiLCJvcGVuIiwic2F2ZSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5Iiwib25DaGFuZ2UiLCJlbGVtZW50IiwidGFyZ2V0IiwibmFtZSIsInZhbHVlIiwiZ2V0SXRlbSIsImRhdGFGb3JtIiwicXVlcnlTZWxlY3RvckFsbCIsInBhcnNlIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJmb3JFYWNoIiwiY2FsbCIsImNoZWNrZWQiLCJzdXJuYW1lIiwiZ2VuZXJhdGVFcnJvciIsInRleHQiLCJlcnJvciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJzdHlsZSIsImNvbG9yIiwiaW5uZXJIVE1MIiwic2hvd0Vycm9yIiwiZXJyb3JQbGFjZSIsInBsYWNlIiwicGFyZW50RWxlbWVudCIsImluc2VydEJlZm9yZSIsImNoZWNrSW5wdXRUZXh0IiwiZmllbGQiLCJlcnJvclRleHQiLCJ0ZXh0VmFsdWUiLCJ0ZXN0IiwiY2hlY2tJbnB1dFJhZGlvIiwiZmF2b3JpdGVOdW1iZXIiLCJnZXRFbGVtZW50c0J5TmFtZSIsImZpbHRlciIsImVsZW0iLCJlcnJvcnMiLCJyZW1vdmUiXSwibWFwcGluZ3MiOiJjQUFBLFdBQ0UsU0FBU0EsSUFDUEMsU0FBU0MsY0FBYyxjQUFjQyxVQUFVQyxPQUFPLG1CQWlCeERDLE9BQU9DLGdCQUFrQixDQUN2QkMsTUFmRixXQUNFUCxJQUNBLElBQUssSUFBSVEsRUFBSSxFQUFHQSxFQUFJSCxPQUFPSSxRQUFRQyxLQUFLQyxPQUFRSCxJQUM5Q0gsT0FBT0ksUUFBUUMsS0FBS0YsR0FBR0ksVUFBVyxHQWFwQ0MsSUFURixXQUNFYixJQUNBLElBQUssSUFBSVEsRUFBSSxFQUFHQSxFQUFJSCxPQUFPSSxRQUFRQyxLQUFLQyxPQUFRSCxJQUM5Q0gsT0FBT0ksUUFBUUMsS0FBS0YsR0FBR0ksVUFBVyxJQWZ4QyxHQ0FBLFdBY0UsSUFBSUUsRUFBU2IsU0FBU0MsY0FBYyxXQUVoQ1ksR0FDRkEsRUFBT0MsaUJBQWlCLFFBQVMsV0FDL0JWLE9BQU9XLFdBQVdDLFlBQ2xCWixPQUFPQyxnQkFBZ0JDLFFBZmxCLElBQUlXLFFBQVEsU0FBVUMsRUFBU0MsR0FDcENDLFdBQVcsV0FDVGhCLE9BQU9XLFdBQVdNLFFBQ0xyQixTQUFTQyxjQUFjLFVBQ2RrQixFQUFPLGlDQUFuQkQsSUFDVmQsT0FBT0MsZ0JBQWdCTyxPQVJmLE9Bb0JQVSxLQUFLbEIsT0FBT21CLFFBQVFDLFlBQ3BCQyxNQUFNckIsT0FBT21CLFFBQVFHLGVBdEI5QixHQ0FBLFdBV0UsU0FBU0EsSUFDUEMsRUFBTXpCLFVBQVVDLE9BQU8sZ0JBR3pCLElBQUl5QixFQUFlNUIsU0FBU0MsY0FBYyxvQkFDdEMwQixFQUFRM0IsU0FBU0MsY0FBYyxXQUMvQjRCLEVBQVE3QixTQUFTQyxjQUFjLFVBQy9CNkIsRUFBaUI5QixTQUFTQyxjQUFjLGlCQUV4QzJCLEdBQ0ZBLEVBQWFkLGlCQUFpQixRQUFTLFdBQ3JDWSxNQUlBRyxHQUNGQSxFQUFNZixpQkFBaUIsUUFBU1ksR0FHOUJJLEdBQ0ZBLEVBQWVoQixpQkFBaUIsUUF4QmxDLFdBQ0VWLE9BQU95QixVQTBCVHpCLE9BQU9VLGlCQUFpQixVQUFXLFNBQVVpQixHQWpDakMsS0FrQ05BLEVBQUlDLFVBQ05ELEVBQUlFLGlCQUNBTixFQUFNekIsVUFBVWdDLFNBQVMsaUJBQzNCUixPQUtOdEIsT0FBT21CLFFBQVUsQ0FDZkMsV0F6Q0YsV0FDRXBCLE9BQU8rQixLQUFLLG1CQXlDWlQsWUFBYUEsR0E3Q2pCLEdDQUEsV0FDRSxTQUFTVSxFQUFLM0IsR0FDWjRCLGFBQWFDLFFBQVEsT0FBUUMsS0FBS0MsVUFBVS9CLElBRzlDLFNBQVNnQyxFQUFTVixHQUNoQixJQUFJVyxFQUFVWCxFQUFJWSxPQUNkQyxFQUFPRixFQUFRRSxLQUNmQyxFQUFRSCxFQUFRRyxNQUNwQnBDLEVBQUttQyxHQUFRQyxFQUNiVCxFQUFLM0IsR0FHUCxJQUFJQSxFQUFPNEIsYUFBYVMsUUFBUSxRQUM1QkMsRUFBVy9DLFNBQVNnRCxpQkFBaUIsVUFFckN2QyxFQUNGQSxFQUFPOEIsS0FBS1UsTUFBTXhDLEdBRWxCMkIsRUFBSzNCLEVBQU8sSUFHZHlDLE1BQU1DLFVBQVVDLFFBQVFDLEtBQUtOLEVBQVUsU0FBVWhCLEdBQzNDdEIsRUFBS3NCLEVBQUlhLFFBQVViLEVBQUljLE1BQ3pCZCxFQUFJdUIsU0FBVSxFQUNRLFNBQWJ2QixFQUFJYSxLQUNiYixFQUFJYyxNQUFRcEMsRUFBS21DLE1BQVEsR0FDSCxZQUFiYixFQUFJYSxLQUNiYixFQUFJYyxNQUFRcEMsRUFBSzhDLFNBQVcsR0FDTixtQkFBYnhCLEVBQUlhLE9BQ2JiLEVBQUljLE1BQVFwQyxFQUFLLG1CQUVuQnNCLEVBQUlqQixpQkFBaUIsU0FBVTJCLEtBR2pDckMsT0FBT0ksUUFBVSxDQUNmQyxLQUFNc0MsR0FwQ1YsR0NBQSxXQUNFLFNBQVNTLEVBQWNDLEdBQ3JCLElBQUlDLEVBQVExRCxTQUFTMkQsY0FBYyxPQUluQyxPQUhBRCxFQUFNRSxVQUFZLFFBQ2xCRixFQUFNRyxNQUFNQyxNQUFRLE1BQ3BCSixFQUFNSyxVQUFZTixFQUNYQyxFQUdULFNBQVNNLEVBQVVOLEVBQU9PLEdBQ3hCLElBQUlDLEVBQVFsRSxTQUFTQyxjQUFjZ0UsR0FDbkNDLEVBQU1DLGNBQWNDLGFBQWFWLEVBQU9RLEdBVTFDLFNBQVNHLEVBQWVDLEVBQU9MLEVBQVlNLEdBQ3pDLElBQUlDLEVBQVl4RSxTQUFTQyxjQUFjcUUsR0FBT3pCLE1BQ2pDLG1CQUNENEIsS0FBS0QsSUFFZlIsRUFEWVIsRUFBY2UsR0FDVE4sR0FJckIsU0FBU1MsRUFBZ0JKLEVBQU9MLEVBQVlNLEdBQzFDLElBQUlJLEVBQWlCM0UsU0FBUzRFLGtCQUFrQk4sR0FDM0NwQixNQUFNQyxVQUFVMEIsT0FBT3hCLEtBQUtzQixFQUFnQixTQUFVRyxHQUN6RCxPQUFPQSxFQUFLeEIsVUFDWDVDLFFBRURzRCxFQURZUixFQUFjZSxHQUNUTixHQW9CckI3RCxPQUFPVyxXQUFhLENBQ2xCTSxNQVRGLFdBUkEsSUFBcUJpRCxFQUFPTCxFQUFZTSxFQVN0Q0YsRUFBZSxRQUFTLGdCQUFpQiwrRUFDekNBLEVBQWUsV0FBWSxtQkFBb0IsbUZBQy9DSyxFQUFnQixrQkFBbUIsMkJBQTRCLDBCQUMvREEsRUFBZ0IsaUJBQWtCLDBCQUEyQix5QkFaMUNKLEVBYVAsa0JBYmNMLEVBYUssMEJBYk9NLEVBYW9CLDZDQVp0Q3ZFLFNBQVNDLGNBQWNxRSxHQUFPekIsT0FHaERtQixFQURZUixFQUFjZSxHQUNUTixJQWNuQmpELFVBNUNGLFdBRUUsSUFEQSxJQUFJK0QsRUFBUy9FLFNBQVNnRCxpQkFBaUIsVUFDOUJ6QyxFQUFJLEVBQUdBLEVBQUl3RSxFQUFPckUsT0FBUUgsSUFDakN3RSxFQUFPeEUsR0FBR3lFLFdBakJoQiIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gYW5pbWF0aW9uVG9nZ2xlKCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hbmltYXRpb24nKS5jbGFzc0xpc3QudG9nZ2xlKCdhbmltYXRpb24tLXNob3cnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGJsb2NrRm9ybSgpIHtcbiAgICBhbmltYXRpb25Ub2dnbGUoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdpbmRvdy5zdG9yYWdlLmRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIHdpbmRvdy5zdG9yYWdlLmRhdGFbaV0uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVuQmxvY2tGb3JtKCkge1xuICAgIGFuaW1hdGlvblRvZ2dsZSgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2luZG93LnN0b3JhZ2UuZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgd2luZG93LnN0b3JhZ2UuZGF0YVtpXS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHdpbmRvdy5hbmltYXRpb25Mb2FkZXIgPSB7XG4gICAgc3RhcnQ6IGJsb2NrRm9ybSxcbiAgICBlbmQ6IHVuQmxvY2tGb3JtXG4gIH07XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgREVMQVkgPSAyMDAwO1xuXG4gIGZ1bmN0aW9uIGNoZWNrRm9ybVByb21pc2UoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cudmFsaWRhdGlvbi5jaGVjaygpO1xuICAgICAgICBsZXQgZXJyb3JzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVycm9yJyk7XG4gICAgICAgICFlcnJvcnMgPyByZXNvbHZlKCkgOiByZWplY3QoJ9CX0LDQv9C+0LvQvdC40YLQtSDQstGB0LUg0L/QvtC70Y8g0L/RgNCw0LLQuNC70YzQvdC+IScpO1xuICAgICAgICB3aW5kb3cuYW5pbWF0aW9uTG9hZGVyLmVuZCgpO1xuICAgICAgfSwgREVMQVkpO1xuICAgIH0pO1xuICB9XG5cbiAgbGV0IHN1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWJtaXQnKTtcblxuICBpZiAoc3VibWl0KSB7XG4gICAgc3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgd2luZG93LnZhbGlkYXRpb24uaGlkZUVycm9yKCk7XG4gICAgICB3aW5kb3cuYW5pbWF0aW9uTG9hZGVyLnN0YXJ0KCk7XG4gICAgICBjaGVja0Zvcm1Qcm9taXNlKClcbiAgICAgICAgLnRoZW4od2luZG93LnNlcnZpY2Uub3BlbldpbmRvdylcbiAgICAgICAgLmNhdGNoKHdpbmRvdy5zZXJ2aWNlLnBvcFVwVG9nZ2xlKTtcbiAgICB9KTtcbiAgfVxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IEVTQyA9IDI3O1xuXG4gIGZ1bmN0aW9uIG9wZW5XaW5kb3coKSB7XG4gICAgd2luZG93Lm9wZW4oJ3RoYW5rLXlvdS5odG1sJyk7XG4gIH1cblxuICBmdW5jdGlvbiBjbG9zZVdpbmRvdygpIHtcbiAgICB3aW5kb3cuY2xvc2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvcFVwVG9nZ2xlKCkge1xuICAgIHBvcFVwLmNsYXNzTGlzdC50b2dnbGUoJ3BvcC11cC0tc2hvdycpO1xuICB9XG5cbiAgbGV0IHBvcFVwV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3AtdXBfX3dyYXBwZXInKTtcbiAgbGV0IHBvcFVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcC11cCcpO1xuICBsZXQgY2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvc2UnKTtcbiAgbGV0IGNsb3NlV2luZG93QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb3NlLXdpbmRvdycpO1xuXG4gIGlmIChwb3BVcFdyYXBwZXIpIHtcbiAgICBwb3BVcFdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBwb3BVcFRvZ2dsZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgaWYgKGNsb3NlKSB7XG4gICAgY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwb3BVcFRvZ2dsZSk7XG4gIH1cblxuICBpZiAoY2xvc2VXaW5kb3dCdG4pIHtcbiAgICBjbG9zZVdpbmRvd0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlV2luZG93KTtcbiAgfVxuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2dCkge1xuICAgIGlmIChldnQua2V5Q29kZSA9PT0gRVNDKSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChwb3BVcC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcC11cC0tc2hvdycpKSB7XG4gICAgICAgIHBvcFVwVG9nZ2xlKCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICB3aW5kb3cuc2VydmljZSA9IHtcbiAgICBvcGVuV2luZG93OiBvcGVuV2luZG93LFxuICAgIHBvcFVwVG9nZ2xlOiBwb3BVcFRvZ2dsZVxuICB9O1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIHNhdmUoZGF0YSkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmb3JtJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25DaGFuZ2UoZXZ0KSB7XG4gICAgbGV0IGVsZW1lbnQgPSBldnQudGFyZ2V0O1xuICAgIGxldCBuYW1lID0gZWxlbWVudC5uYW1lO1xuICAgIGxldCB2YWx1ZSA9IGVsZW1lbnQudmFsdWU7XG4gICAgZGF0YVtuYW1lXSA9IHZhbHVlO1xuICAgIHNhdmUoZGF0YSk7XG4gIH1cblxuICBsZXQgZGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmb3JtJyk7XG4gIGxldCBkYXRhRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tuYW1lXScpO1xuXG4gIGlmIChkYXRhKSB7XG4gICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gIH0gZWxzZSB7XG4gICAgc2F2ZShkYXRhID0ge30pO1xuICB9XG5cbiAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChkYXRhRm9ybSwgZnVuY3Rpb24gKGV2dCkge1xuICAgIGlmIChkYXRhW2V2dC5uYW1lXSA9PT0gZXZ0LnZhbHVlKSB7XG4gICAgICBldnQuY2hlY2tlZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChldnQubmFtZSA9PT0gJ25hbWUnKSB7XG4gICAgICBldnQudmFsdWUgPSBkYXRhLm5hbWUgfHwgJyc7XG4gICAgfSBlbHNlIGlmIChldnQubmFtZSA9PT0gJ3N1cm5hbWUnKSB7XG4gICAgICBldnQudmFsdWUgPSBkYXRhLnN1cm5hbWUgfHwgJyc7XG4gICAgfSBlbHNlIGlmIChldnQubmFtZSA9PT0gJ2Zhdm9yaXRlLW11c2ljJykge1xuICAgICAgZXZ0LnZhbHVlID0gZGF0YVsnZmF2b3JpdGUtbXVzaWMnXTtcbiAgICB9XG4gICAgZXZ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQ2hhbmdlKTtcbiAgfSk7XG5cbiAgd2luZG93LnN0b3JhZ2UgPSB7XG4gICAgZGF0YTogZGF0YUZvcm1cbiAgfTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBnZW5lcmF0ZUVycm9yKHRleHQpIHtcbiAgICBsZXQgZXJyb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlcnJvci5jbGFzc05hbWUgPSAnZXJyb3InO1xuICAgIGVycm9yLnN0eWxlLmNvbG9yID0gJ3JlZCc7XG4gICAgZXJyb3IuaW5uZXJIVE1MID0gdGV4dDtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cblxuICBmdW5jdGlvbiBzaG93RXJyb3IoZXJyb3IsIGVycm9yUGxhY2UpIHtcbiAgICBsZXQgcGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVycm9yUGxhY2UpO1xuICAgIHBsYWNlLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGVycm9yLCBwbGFjZSk7XG4gIH1cblxuICBmdW5jdGlvbiBoaWRlRXJyb3IoKSB7XG4gICAgbGV0IGVycm9ycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lcnJvcicpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXJyb3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBlcnJvcnNbaV0ucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2hlY2tJbnB1dFRleHQoZmllbGQsIGVycm9yUGxhY2UsIGVycm9yVGV4dCkge1xuICAgIGxldCB0ZXh0VmFsdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZpZWxkKS52YWx1ZTtcbiAgICBsZXQgcmVnRXhwID0gL15b0LAt0Y/QkC3Qr9GR0IFdezIsfSQvO1xuICAgIGlmICghcmVnRXhwLnRlc3QodGV4dFZhbHVlKSkge1xuICAgICAgbGV0IGVycm9yID0gZ2VuZXJhdGVFcnJvcihlcnJvclRleHQpO1xuICAgICAgc2hvd0Vycm9yKGVycm9yLCBlcnJvclBsYWNlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjaGVja0lucHV0UmFkaW8oZmllbGQsIGVycm9yUGxhY2UsIGVycm9yVGV4dCkge1xuICAgIGxldCBmYXZvcml0ZU51bWJlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKGZpZWxkKTtcbiAgICBpZiAoIUFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChmYXZvcml0ZU51bWJlciwgZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgIHJldHVybiBlbGVtLmNoZWNrZWQ7XG4gICAgfSkubGVuZ3RoKSB7XG4gICAgICBsZXQgZXJyb3IgPSBnZW5lcmF0ZUVycm9yKGVycm9yVGV4dCk7XG4gICAgICBzaG93RXJyb3IoZXJyb3IsIGVycm9yUGxhY2UpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrU2VsZWN0KGZpZWxkLCBlcnJvclBsYWNlLCBlcnJvclRleHQpIHtcbiAgICBsZXQgZmF2b3JpdGVNdXNpYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZmllbGQpLnZhbHVlO1xuICAgIGlmICghZmF2b3JpdGVNdXNpYykge1xuICAgICAgbGV0IGVycm9yID0gZ2VuZXJhdGVFcnJvcihlcnJvclRleHQpO1xuICAgICAgc2hvd0Vycm9yKGVycm9yLCBlcnJvclBsYWNlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjaGVja0Zvcm0oKSB7XG4gICAgY2hlY2tJbnB1dFRleHQoJy5uYW1lJywgJy53cmFwcGVyLW5hbWUnLCAn0JjQvNGPINC00L7Qu9C20L3QviDRgdC+0YHRgtC+0Y/RgtGMINGC0L7Qu9GM0LrQviDQuNC3INGA0YPRgdGB0LrQuNGFINCx0YPQutCyINC4INC40LzQtdGC0Ywg0LTQu9C40L3QvdGDINCx0L7Qu9C10LUgMtGFINGB0LjQvNCy0L7Qu9C+0LInKTtcbiAgICBjaGVja0lucHV0VGV4dCgnLnN1cm5hbWUnLCAnLndyYXBwZXItc3VybmFtZScsICfQpNCw0LzQuNC70LjRjyDQtNC+0LvQttC90LAg0YHQvtGB0YLQvtGP0YLRjCDRgtC+0LvRjNC60L4g0LjQtyDRgNGD0YHRgdC60LjRhSDQsdGD0LrQsiDQuCDQuNC80LXRgtGMINC00LvQuNC90L3RgyDQsdC+0LvQtdC1IDLRhSDRgdC40LzQstC+0LvQvtCyJyk7XG4gICAgY2hlY2tJbnB1dFJhZGlvKCdmYXZvcml0ZS1udW1iZXInLCAnLndyYXBwZXItZmF2b3JpdGUtbnVtYmVyJywgJ9CS0YvQsdC40YDQuNGC0LUg0LvRjtCx0LjQvNGD0Y4g0YbQuNGE0YDRgycpO1xuICAgIGNoZWNrSW5wdXRSYWRpbygnZmF2b3JpdGUtY29sb3InLCAnLndyYXBwZXItZmF2b3JpdGUtY29sb3InLCAn0JLRi9Cx0LjRgNC40YLQtSDQu9GO0LHQuNC80YvQuSDRhtCy0LXRgicpO1xuICAgIGNoZWNrU2VsZWN0KCcuZmF2b3JpdGUtbXVzaWMnLCAnLndyYXBwZXItZmF2b3JpdGUtbXVzaWMnLCAn0JLRi9Cx0LjRgNC40YLQtSDQu9GO0LHQuNC80L7Qs9C+INC80YPQt9GL0LrQsNC70YzQvdC+0LPQviDQuNGB0L/QvtC70L3QuNGC0LXQu9GPJyk7XG4gIH1cblxuICB3aW5kb3cudmFsaWRhdGlvbiA9IHtcbiAgICBjaGVjazogY2hlY2tGb3JtLFxuICAgIGhpZGVFcnJvcjogaGlkZUVycm9yXG4gIH07XG59KSgpO1xuIl19
