"use strict";!function(){function n(){document.querySelector(".animation").classList.toggle("animation--show")}window.animationLoader={start:function(){n();for(var e=0;e<window.storage.data.length;e++)window.storage.data[e].disabled=!0},end:function(){n();for(var e=0;e<window.storage.data.length;e++)window.storage.data[e].disabled=!1}}}(),function(){var e=document.querySelector(".form__btn");e&&e.addEventListener("click",function(){window.validation.hideError(),window.animationLoader.start(),new Promise(function(e,n){setTimeout(function(){window.validation.check(),document.querySelector(".error")?n("Заполните все поля правильно!"):e(),window.animationLoader.end()},2e3)}).then(window.service.openWindow).catch(window.service.popUpToggle)})}(),function(){function n(){o.classList.toggle("pop-up--show")}var e=document.querySelector(".pop-up__wrapper"),o=document.querySelector(".pop-up"),t=document.querySelector(".pop-up__btn"),r=document.querySelector(".thanks__btn");e&&e.addEventListener("click",function(){n()}),t&&t.addEventListener("click",n),r&&r.addEventListener("click",function(){window.close()}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),o.classList.contains("pop-up--show")&&n())}),window.service={openWindow:function(){window.open("thank-you.html")},popUpToggle:n}}(),function(){function r(e){localStorage.setItem("form",JSON.stringify(e))}function n(e){var n=e.target,o=n.name,t=n.value;a[o]=t,r(a)}var a=localStorage.getItem("form"),e=document.querySelectorAll("[name]");a?a=JSON.parse(a):r(a={}),Array.prototype.forEach.call(e,function(e){a[e.name]===e.value?e.checked=!0:"name"===e.name?e.value=a.name||"":"surname"===e.name?e.value=a.surname||"":"favorite-music"===e.name&&(e.value=a["favorite-music"]),e.addEventListener("change",n)}),window.storage={data:e}}(),function(){function r(e){var n=document.createElement("div");return n.className="error",n.style.color="red",n.innerHTML=e,n}function a(e,n){var o=document.querySelector(n);o.parentElement.insertBefore(e,o)}function t(e,n,o){var t=document.querySelector(e).value;/^[а-яА-ЯёЁ]{2,}$/.test(t)||a(r(o),n)}function i(e,n,o){var t=document.getElementsByName(e);Array.prototype.filter.call(t,function(e){return e.checked}).length||a(r(o),n)}window.validation={check:function(){var e,n,o;t(".form__name",".form__wrapper-name","Имя должно состоять только из русских букв и иметь длинну более 2х символов"),t(".form__surname",".form__wrapper-surname","Фамилия должна состоять только из русских букв и иметь длинну более 2х символов"),i("favorite-number",".form__wrapper-favorite-number","Выбирите любимую цифру"),i("favorite-color",".form__wrapper-favorite-color","Выбирите любимый цвет"),e=".form__favorite-music",n=".form__wrapper-favorite-music",o="Выбирите любимого музыкального исполнителя",document.querySelector(e).value||a(r(o),n)},hideError:function(){for(var e=document.querySelectorAll(".error"),n=0;n<e.length;n++)e[n].remove()}}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbkxvYWRlci5qcyIsImZvcm0uanMiLCJzZXJ2aWNlLmpzIiwic3RvcmFnZS5qcyIsInZhbGlkYXRpb24uanMiXSwibmFtZXMiOlsiYW5pbWF0aW9uVG9nZ2xlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwid2luZG93IiwiYW5pbWF0aW9uTG9hZGVyIiwic3RhcnQiLCJpIiwic3RvcmFnZSIsImRhdGEiLCJsZW5ndGgiLCJkaXNhYmxlZCIsImVuZCIsInN1Ym1pdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ2YWxpZGF0aW9uIiwiaGlkZUVycm9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzZXRUaW1lb3V0IiwiY2hlY2siLCJ0aGVuIiwic2VydmljZSIsIm9wZW5XaW5kb3ciLCJjYXRjaCIsInBvcFVwVG9nZ2xlIiwicG9wVXAiLCJwb3BVcFdyYXBwZXIiLCJjbG9zZSIsImNsb3NlV2luZG93QnRuIiwiZXZ0Iiwia2V5Q29kZSIsInByZXZlbnREZWZhdWx0IiwiY29udGFpbnMiLCJvcGVuIiwic2F2ZSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5Iiwib25DaGFuZ2UiLCJlbGVtZW50IiwidGFyZ2V0IiwibmFtZSIsInZhbHVlIiwiZ2V0SXRlbSIsImRhdGFGb3JtIiwicXVlcnlTZWxlY3RvckFsbCIsInBhcnNlIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJmb3JFYWNoIiwiY2FsbCIsImNoZWNrZWQiLCJzdXJuYW1lIiwiZ2VuZXJhdGVFcnJvciIsInRleHQiLCJlcnJvciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJzdHlsZSIsImNvbG9yIiwiaW5uZXJIVE1MIiwic2hvd0Vycm9yIiwiZXJyb3JQbGFjZSIsInBsYWNlIiwicGFyZW50RWxlbWVudCIsImluc2VydEJlZm9yZSIsImNoZWNrSW5wdXRUZXh0IiwiZmllbGQiLCJlcnJvclRleHQiLCJ0ZXh0VmFsdWUiLCJ0ZXN0IiwiY2hlY2tJbnB1dFJhZGlvIiwiZmF2b3JpdGVOdW1iZXIiLCJnZXRFbGVtZW50c0J5TmFtZSIsImZpbHRlciIsImVsZW0iLCJlcnJvcnMiLCJyZW1vdmUiXSwibWFwcGluZ3MiOiJjQUFBLFdBRUUsU0FBU0EsSUFDUEMsU0FBU0MsY0FBYyxjQUFjQyxVQUFVQyxPQUFPLG1CQWlCeERDLE9BQU9DLGdCQUFrQixDQUN2QkMsTUFmRixXQUNFUCxJQUNBLElBQUssSUFBSVEsRUFBSSxFQUFHQSxFQUFJSCxPQUFPSSxRQUFRQyxLQUFLQyxPQUFRSCxJQUM5Q0gsT0FBT0ksUUFBUUMsS0FBS0YsR0FBR0ksVUFBVyxHQWFwQ0MsSUFURixXQUNFYixJQUNBLElBQUssSUFBSVEsRUFBSSxFQUFHQSxFQUFJSCxPQUFPSSxRQUFRQyxLQUFLQyxPQUFRSCxJQUM5Q0gsT0FBT0ksUUFBUUMsS0FBS0YsR0FBR0ksVUFBVyxJQWhCeEMsR0NBQSxXQWVFLElBQUlFLEVBQVNiLFNBQVNDLGNBQWMsY0FFaENZLEdBQ0ZBLEVBQU9DLGlCQUFpQixRQUFTLFdBQy9CVixPQUFPVyxXQUFXQyxZQUNsQlosT0FBT0MsZ0JBQWdCQyxRQWZsQixJQUFJVyxRQUFRLFNBQVVDLEVBQVNDLEdBQ3BDQyxXQUFXLFdBQ1RoQixPQUFPVyxXQUFXTSxRQUNMckIsU0FBU0MsY0FBYyxVQUNka0IsRUFBTyxpQ0FBbkJELElBQ1ZkLE9BQU9DLGdCQUFnQk8sT0FSZixPQW9CUFUsS0FBS2xCLE9BQU9tQixRQUFRQyxZQUNwQkMsTUFBTXJCLE9BQU9tQixRQUFRRyxlQXZCOUIsR0NBQSxXQVlFLFNBQVNBLElBQ1BDLEVBQU16QixVQUFVQyxPQUFPLGdCQUd6QixJQUFJeUIsRUFBZTVCLFNBQVNDLGNBQWMsb0JBQ3RDMEIsRUFBUTNCLFNBQVNDLGNBQWMsV0FDL0I0QixFQUFRN0IsU0FBU0MsY0FBYyxnQkFDL0I2QixFQUFpQjlCLFNBQVNDLGNBQWMsZ0JBRXhDMkIsR0FDRkEsRUFBYWQsaUJBQWlCLFFBQVMsV0FDckNZLE1BSUFHLEdBQ0ZBLEVBQU1mLGlCQUFpQixRQUFTWSxHQUc5QkksR0FDRkEsRUFBZWhCLGlCQUFpQixRQXhCbEMsV0FDRVYsT0FBT3lCLFVBMEJUekIsT0FBT1UsaUJBQWlCLFVBQVcsU0FBVWlCLEdBakNqQyxLQWtDTkEsRUFBSUMsVUFDTkQsRUFBSUUsaUJBQ0FOLEVBQU16QixVQUFVZ0MsU0FBUyxpQkFDM0JSLE9BS050QixPQUFPbUIsUUFBVSxDQUNmQyxXQXpDRixXQUNFcEIsT0FBTytCLEtBQUssbUJBeUNaVCxZQUFhQSxHQTlDakIsR0NBQSxXQUVFLFNBQVNVLEVBQUszQixHQUNaNEIsYUFBYUMsUUFBUSxPQUFRQyxLQUFLQyxVQUFVL0IsSUFHOUMsU0FBU2dDLEVBQVNWLEdBQ2hCLElBQUlXLEVBQVVYLEVBQUlZLE9BQ2RDLEVBQU9GLEVBQVFFLEtBQ2ZDLEVBQVFILEVBQVFHLE1BQ3BCcEMsRUFBS21DLEdBQVFDLEVBQ2JULEVBQUszQixHQUdQLElBQUlBLEVBQU80QixhQUFhUyxRQUFRLFFBQzVCQyxFQUFXL0MsU0FBU2dELGlCQUFpQixVQUVyQ3ZDLEVBQ0ZBLEVBQU84QixLQUFLVSxNQUFNeEMsR0FFbEIyQixFQUFLM0IsRUFBTyxJQUdkeUMsTUFBTUMsVUFBVUMsUUFBUUMsS0FBS04sRUFBVSxTQUFVaEIsR0FDM0N0QixFQUFLc0IsRUFBSWEsUUFBVWIsRUFBSWMsTUFDekJkLEVBQUl1QixTQUFVLEVBQ1EsU0FBYnZCLEVBQUlhLEtBQ2JiLEVBQUljLE1BQVFwQyxFQUFLbUMsTUFBUSxHQUNILFlBQWJiLEVBQUlhLEtBQ2JiLEVBQUljLE1BQVFwQyxFQUFLOEMsU0FBVyxHQUNOLG1CQUFieEIsRUFBSWEsT0FDYmIsRUFBSWMsTUFBUXBDLEVBQUssbUJBRW5Cc0IsRUFBSWpCLGlCQUFpQixTQUFVMkIsS0FHakNyQyxPQUFPSSxRQUFVLENBQ2ZDLEtBQU1zQyxHQXJDVixHQ0FBLFdBRUUsU0FBU1MsRUFBY0MsR0FDckIsSUFBSUMsRUFBUTFELFNBQVMyRCxjQUFjLE9BSW5DLE9BSEFELEVBQU1FLFVBQVksUUFDbEJGLEVBQU1HLE1BQU1DLE1BQVEsTUFDcEJKLEVBQU1LLFVBQVlOLEVBQ1hDLEVBR1QsU0FBU00sRUFBVU4sRUFBT08sR0FDeEIsSUFBSUMsRUFBUWxFLFNBQVNDLGNBQWNnRSxHQUNuQ0MsRUFBTUMsY0FBY0MsYUFBYVYsRUFBT1EsR0FXMUMsU0FBU0csRUFBZUMsRUFBT0wsRUFBWU0sR0FDekMsSUFBSUMsRUFBWXhFLFNBQVNDLGNBQWNxRSxHQUFPekIsTUFDakMsbUJBQ0Q0QixLQUFLRCxJQUVmUixFQURZUixFQUFjZSxHQUNUTixHQUlyQixTQUFTUyxFQUFnQkosRUFBT0wsRUFBWU0sR0FDMUMsSUFBSUksRUFBaUIzRSxTQUFTNEUsa0JBQWtCTixHQUMzQ3BCLE1BQU1DLFVBQVUwQixPQUFPeEIsS0FBS3NCLEVBQWdCLFNBQVVHLEdBQ3pELE9BQU9BLEVBQUt4QixVQUNYNUMsUUFFRHNELEVBRFlSLEVBQWNlLEdBQ1ROLEdBb0JyQjdELE9BQU9XLFdBQWEsQ0FDbEJNLE1BVEYsV0FSQSxJQUFxQmlELEVBQU9MLEVBQVlNLEVBU3RDRixFQUFlLGNBQWUsc0JBQXVCLCtFQUNyREEsRUFBZSxpQkFBa0IseUJBQTBCLG1GQUMzREssRUFBZ0Isa0JBQW1CLGlDQUFrQywwQkFDckVBLEVBQWdCLGlCQUFrQixnQ0FBaUMseUJBWmhESixFQWFQLHdCQWJjTCxFQWFXLGdDQWJDTSxFQWFnQyw2Q0FabER2RSxTQUFTQyxjQUFjcUUsR0FBT3pCLE9BR2hEbUIsRUFEWVIsRUFBY2UsR0FDVE4sSUFjbkJqRCxVQTdDRixXQUVFLElBREEsSUFBSStELEVBQVMvRSxTQUFTZ0QsaUJBQWlCLFVBQzlCekMsRUFBSSxFQUFHQSxFQUFJd0UsRUFBT3JFLE9BQVFILElBQ2pDd0UsRUFBT3hFLEdBQUd5RSxXQWxCaEIiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gIC8vINCR0LvQvtC60LjRgNC+0LLQutCwINGE0L7RgNC80Ysg0Lgg0LDQvdC40LzQsNGG0LjRj1xuICBmdW5jdGlvbiBhbmltYXRpb25Ub2dnbGUoKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFuaW1hdGlvbicpLmNsYXNzTGlzdC50b2dnbGUoJ2FuaW1hdGlvbi0tc2hvdycpO1xuICB9XG5cbiAgZnVuY3Rpb24gYmxvY2tGb3JtKCkge1xuICAgIGFuaW1hdGlvblRvZ2dsZSgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2luZG93LnN0b3JhZ2UuZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgd2luZG93LnN0b3JhZ2UuZGF0YVtpXS5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdW5CbG9ja0Zvcm0oKSB7XG4gICAgYW5pbWF0aW9uVG9nZ2xlKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3aW5kb3cuc3RvcmFnZS5kYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICB3aW5kb3cuc3RvcmFnZS5kYXRhW2ldLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgd2luZG93LmFuaW1hdGlvbkxvYWRlciA9IHtcbiAgICBzdGFydDogYmxvY2tGb3JtLFxuICAgIGVuZDogdW5CbG9ja0Zvcm1cbiAgfTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAvLyBQcm9taXNlINGN0LzRg9C70Y/RhtC40Y8g0L7RgtC/0YDQsNCy0LrQuCDQtNCw0L3QvdGL0YVcbiAgY29uc3QgREVMQVkgPSAyMDAwO1xuXG4gIGZ1bmN0aW9uIGNoZWNrRm9ybVByb21pc2UoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cudmFsaWRhdGlvbi5jaGVjaygpO1xuICAgICAgICBsZXQgZXJyb3JzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVycm9yJyk7XG4gICAgICAgICFlcnJvcnMgPyByZXNvbHZlKCkgOiByZWplY3QoJ9CX0LDQv9C+0LvQvdC40YLQtSDQstGB0LUg0L/QvtC70Y8g0L/RgNCw0LLQuNC70YzQvdC+IScpO1xuICAgICAgICB3aW5kb3cuYW5pbWF0aW9uTG9hZGVyLmVuZCgpO1xuICAgICAgfSwgREVMQVkpO1xuICAgIH0pO1xuICB9XG5cbiAgbGV0IHN1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19idG4nKTtcblxuICBpZiAoc3VibWl0KSB7XG4gICAgc3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgd2luZG93LnZhbGlkYXRpb24uaGlkZUVycm9yKCk7XG4gICAgICB3aW5kb3cuYW5pbWF0aW9uTG9hZGVyLnN0YXJ0KCk7XG4gICAgICBjaGVja0Zvcm1Qcm9taXNlKClcbiAgICAgICAgLnRoZW4od2luZG93LnNlcnZpY2Uub3BlbldpbmRvdylcbiAgICAgICAgLmNhdGNoKHdpbmRvdy5zZXJ2aWNlLnBvcFVwVG9nZ2xlKTtcbiAgICB9KTtcbiAgfVxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gIC8vINCS0YHQv9C70YvQstCw0Y7RidC10LUg0L7QutC90L4sINC/0LXRgNC10YXQvtC0INC90LAg0L3QvtCy0YPRjiDRgdGC0YDQsNC90LjRhtGDXG4gIGNvbnN0IEVTQyA9IDI3O1xuXG4gIGZ1bmN0aW9uIG9wZW5XaW5kb3coKSB7XG4gICAgd2luZG93Lm9wZW4oJ3RoYW5rLXlvdS5odG1sJyk7XG4gIH1cblxuICBmdW5jdGlvbiBjbG9zZVdpbmRvdygpIHtcbiAgICB3aW5kb3cuY2xvc2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvcFVwVG9nZ2xlKCkge1xuICAgIHBvcFVwLmNsYXNzTGlzdC50b2dnbGUoJ3BvcC11cC0tc2hvdycpO1xuICB9XG5cbiAgbGV0IHBvcFVwV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3AtdXBfX3dyYXBwZXInKTtcbiAgbGV0IHBvcFVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcC11cCcpO1xuICBsZXQgY2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wLXVwX19idG4nKTtcbiAgbGV0IGNsb3NlV2luZG93QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRoYW5rc19fYnRuJyk7XG5cbiAgaWYgKHBvcFVwV3JhcHBlcikge1xuICAgIHBvcFVwV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHBvcFVwVG9nZ2xlKCk7XG4gICAgfSk7XG4gIH1cblxuICBpZiAoY2xvc2UpIHtcbiAgICBjbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHBvcFVwVG9nZ2xlKTtcbiAgfVxuXG4gIGlmIChjbG9zZVdpbmRvd0J0bikge1xuICAgIGNsb3NlV2luZG93QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VXaW5kb3cpO1xuICB9XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXlDb2RlID09PSBFU0MpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKHBvcFVwLmNsYXNzTGlzdC5jb250YWlucygncG9wLXVwLS1zaG93JykpIHtcbiAgICAgICAgcG9wVXBUb2dnbGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHdpbmRvdy5zZXJ2aWNlID0ge1xuICAgIG9wZW5XaW5kb3c6IG9wZW5XaW5kb3csXG4gICAgcG9wVXBUb2dnbGU6IHBvcFVwVG9nZ2xlXG4gIH07XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgLy8g0KDQsNCx0L7RgtCwINGBIGxvY2FsU3RhZ2VcbiAgZnVuY3Rpb24gc2F2ZShkYXRhKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Zvcm0nLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkNoYW5nZShldnQpIHtcbiAgICBsZXQgZWxlbWVudCA9IGV2dC50YXJnZXQ7XG4gICAgbGV0IG5hbWUgPSBlbGVtZW50Lm5hbWU7XG4gICAgbGV0IHZhbHVlID0gZWxlbWVudC52YWx1ZTtcbiAgICBkYXRhW25hbWVdID0gdmFsdWU7XG4gICAgc2F2ZShkYXRhKTtcbiAgfVxuXG4gIGxldCBkYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Zvcm0nKTtcbiAgbGV0IGRhdGFGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW25hbWVdJyk7XG5cbiAgaWYgKGRhdGEpIHtcbiAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgfSBlbHNlIHtcbiAgICBzYXZlKGRhdGEgPSB7fSk7XG4gIH1cbiAgLy8g0JXRgdC70Lgg0LIgbG9jYWxTdGFnZSDQtdGB0YLRjCDQtNCw0L3QvdGL0LUsINCy0L3QtdGB0YLQuCDQuNGFINCyINGE0L7RgNC80YtcbiAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChkYXRhRm9ybSwgZnVuY3Rpb24gKGV2dCkge1xuICAgIGlmIChkYXRhW2V2dC5uYW1lXSA9PT0gZXZ0LnZhbHVlKSB7XG4gICAgICBldnQuY2hlY2tlZCA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChldnQubmFtZSA9PT0gJ25hbWUnKSB7XG4gICAgICBldnQudmFsdWUgPSBkYXRhLm5hbWUgfHwgJyc7XG4gICAgfSBlbHNlIGlmIChldnQubmFtZSA9PT0gJ3N1cm5hbWUnKSB7XG4gICAgICBldnQudmFsdWUgPSBkYXRhLnN1cm5hbWUgfHwgJyc7XG4gICAgfSBlbHNlIGlmIChldnQubmFtZSA9PT0gJ2Zhdm9yaXRlLW11c2ljJykge1xuICAgICAgZXZ0LnZhbHVlID0gZGF0YVsnZmF2b3JpdGUtbXVzaWMnXTtcbiAgICB9XG4gICAgZXZ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQ2hhbmdlKTtcbiAgfSk7XG5cbiAgd2luZG93LnN0b3JhZ2UgPSB7XG4gICAgZGF0YTogZGF0YUZvcm1cbiAgfTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAvLyDQodC+0LfQtNCw0L3QuNC1INC+0YjQuNCx0L7QulxuICBmdW5jdGlvbiBnZW5lcmF0ZUVycm9yKHRleHQpIHtcbiAgICBsZXQgZXJyb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlcnJvci5jbGFzc05hbWUgPSAnZXJyb3InO1xuICAgIGVycm9yLnN0eWxlLmNvbG9yID0gJ3JlZCc7XG4gICAgZXJyb3IuaW5uZXJIVE1MID0gdGV4dDtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cblxuICBmdW5jdGlvbiBzaG93RXJyb3IoZXJyb3IsIGVycm9yUGxhY2UpIHtcbiAgICBsZXQgcGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVycm9yUGxhY2UpO1xuICAgIHBsYWNlLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGVycm9yLCBwbGFjZSk7XG4gIH1cblxuICBmdW5jdGlvbiBoaWRlRXJyb3IoKSB7XG4gICAgbGV0IGVycm9ycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lcnJvcicpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXJyb3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBlcnJvcnNbaV0ucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgLy8g0JLQsNC70LjQtNCw0YbQuNGPINGE0L7RgNC8XG4gIGZ1bmN0aW9uIGNoZWNrSW5wdXRUZXh0KGZpZWxkLCBlcnJvclBsYWNlLCBlcnJvclRleHQpIHtcbiAgICBsZXQgdGV4dFZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihmaWVsZCkudmFsdWU7XG4gICAgbGV0IHJlZ0V4cCA9IC9eW9CwLdGP0JAt0K/RkdCBXXsyLH0kLztcbiAgICBpZiAoIXJlZ0V4cC50ZXN0KHRleHRWYWx1ZSkpIHtcbiAgICAgIGxldCBlcnJvciA9IGdlbmVyYXRlRXJyb3IoZXJyb3JUZXh0KTtcbiAgICAgIHNob3dFcnJvcihlcnJvciwgZXJyb3JQbGFjZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2hlY2tJbnB1dFJhZGlvKGZpZWxkLCBlcnJvclBsYWNlLCBlcnJvclRleHQpIHtcbiAgICBsZXQgZmF2b3JpdGVOdW1iZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShmaWVsZCk7XG4gICAgaWYgKCFBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwoZmF2b3JpdGVOdW1iZXIsIGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICByZXR1cm4gZWxlbS5jaGVja2VkO1xuICAgIH0pLmxlbmd0aCkge1xuICAgICAgbGV0IGVycm9yID0gZ2VuZXJhdGVFcnJvcihlcnJvclRleHQpO1xuICAgICAgc2hvd0Vycm9yKGVycm9yLCBlcnJvclBsYWNlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjaGVja1NlbGVjdChmaWVsZCwgZXJyb3JQbGFjZSwgZXJyb3JUZXh0KSB7XG4gICAgbGV0IGZhdm9yaXRlTXVzaWMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZpZWxkKS52YWx1ZTtcbiAgICBpZiAoIWZhdm9yaXRlTXVzaWMpIHtcbiAgICAgIGxldCBlcnJvciA9IGdlbmVyYXRlRXJyb3IoZXJyb3JUZXh0KTtcbiAgICAgIHNob3dFcnJvcihlcnJvciwgZXJyb3JQbGFjZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2hlY2tGb3JtKCkge1xuICAgIGNoZWNrSW5wdXRUZXh0KCcuZm9ybV9fbmFtZScsICcuZm9ybV9fd3JhcHBlci1uYW1lJywgJ9CY0LzRjyDQtNC+0LvQttC90L4g0YHQvtGB0YLQvtGP0YLRjCDRgtC+0LvRjNC60L4g0LjQtyDRgNGD0YHRgdC60LjRhSDQsdGD0LrQsiDQuCDQuNC80LXRgtGMINC00LvQuNC90L3RgyDQsdC+0LvQtdC1IDLRhSDRgdC40LzQstC+0LvQvtCyJyk7XG4gICAgY2hlY2tJbnB1dFRleHQoJy5mb3JtX19zdXJuYW1lJywgJy5mb3JtX193cmFwcGVyLXN1cm5hbWUnLCAn0KTQsNC80LjQu9C40Y8g0LTQvtC70LbQvdCwINGB0L7RgdGC0L7Rj9GC0Ywg0YLQvtC70YzQutC+INC40Lcg0YDRg9GB0YHQutC40YUg0LHRg9C60LIg0Lgg0LjQvNC10YLRjCDQtNC70LjQvdC90YMg0LHQvtC70LXQtSAy0YUg0YHQuNC80LLQvtC70L7QsicpO1xuICAgIGNoZWNrSW5wdXRSYWRpbygnZmF2b3JpdGUtbnVtYmVyJywgJy5mb3JtX193cmFwcGVyLWZhdm9yaXRlLW51bWJlcicsICfQktGL0LHQuNGA0LjRgtC1INC70Y7QsdC40LzRg9GOINGG0LjRhNGA0YMnKTtcbiAgICBjaGVja0lucHV0UmFkaW8oJ2Zhdm9yaXRlLWNvbG9yJywgJy5mb3JtX193cmFwcGVyLWZhdm9yaXRlLWNvbG9yJywgJ9CS0YvQsdC40YDQuNGC0LUg0LvRjtCx0LjQvNGL0Lkg0YbQstC10YInKTtcbiAgICBjaGVja1NlbGVjdCgnLmZvcm1fX2Zhdm9yaXRlLW11c2ljJywgJy5mb3JtX193cmFwcGVyLWZhdm9yaXRlLW11c2ljJywgJ9CS0YvQsdC40YDQuNGC0LUg0LvRjtCx0LjQvNC+0LPQviDQvNGD0LfRi9C60LDQu9GM0L3QvtCz0L4g0LjRgdC/0L7Qu9C90LjRgtC10LvRjycpO1xuICB9XG5cbiAgd2luZG93LnZhbGlkYXRpb24gPSB7XG4gICAgY2hlY2s6IGNoZWNrRm9ybSxcbiAgICBoaWRlRXJyb3I6IGhpZGVFcnJvclxuICB9O1xufSkoKTtcbiJdfQ==
